---
import ContentLayout from '../../layouts/ContentLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const collections = ['workout-logs', 'benchmarks', 'plans', 'shared-workouts', 'templates'];
	const paths = [];
	
	for (const collection of collections) {
		const content = await getCollection(collection as any);
		for (const item of content) {
			paths.push({
				params: { collection, slug: item.slug },
				props: { item, collection }
			});
		}
	}
	
	return paths;
}

const { item, collection } = Astro.props;
const { Content } = await item.render();

// Generate title from frontmatter or slug
const title = item.data.title || item.slug.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
---

<ContentLayout frontmatter={{ ...item.data, title }}>
	<div class="mb-8">
		<nav class="flex items-center space-x-2 text-sm text-gray-500 mb-4">
			<a href="/" class="hover:text-gray-700 transition-colors">Home</a>
			<span>→</span>
			<a href={`/${collection}`} class="hover:text-gray-700 transition-colors capitalize">
				{collection.replace('-', ' ')}
			</a>
			<span>→</span>
			<span>{title}</span>
		</nav>
	</div>
	
	<Content />
	
	<div class="mt-12 pt-8 border-t border-gray-200">
		<a 
			href={`/${collection}`}
			class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors font-medium"
		>
			← Back to {collection.replace('-', ' ')}
		</a>
	</div>
</ContentLayout>